<html>
<head>
    <title>URL Shortener</title>
    <script src="http://code.jquery.com/jquery-2.1.1.min.js"></script>
</head>
<body>
<br><br>

<form id="createUrl" role="form">
    <input type="url" id="longUrl">
    <button type="submit">Shorten !</button>
</form>

<br><br>

<h2><strong id="shortUrl"></strong></h2>

<script type="text/javascript">
    var API_SERVER = 'http://localhost:3000';

    $( "#createUrl" ).submit(function( event ) {

        event.preventDefault();

        var longUrl = $('#longUrl').val();

        $.ajax({
            url: API_SERVER + '/url/' + encodeURIComponent(longUrl)
            , crossDomain: true
            , dataType: "json"
            , type: 'GET'
            , data: {}
            , success: function (data) {
                if(data.success == 1){
                    $('#shortUrl').text(API_SERVER +'/' +data.key);
                }
            }
            , error: function(request,status,error){
                console.log("code:"+request.status+"\n"+"message:"+request.responseText+"\n"+"error:"+error);
                alert("code:"+request.status+"\n"+"message:"+request.responseText+"\n"+"error:"+error);
            }
        });

    });
</script>
</body>
</html>